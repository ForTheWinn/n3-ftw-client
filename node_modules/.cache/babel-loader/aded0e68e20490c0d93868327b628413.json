{"ast":null,"code":"var _jsxFileName = \"/Users/ed/Projects/n3-ftw/client/src/packages/provider/wallet-provider.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { createContext, useContext, useState } from \"react\";\nimport { LocalStorage } from \"../neo/local-storage\";\nimport { WalletAPI } from \"../neo/wallet\";\nimport toast from \"react-hot-toast\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const WalletContext = /*#__PURE__*/createContext({});\nexport const WalletContextProvider = props => {\n  _s();\n\n  const [network] = useState(props.options.network);\n  const [isWalletModalActive, setWalletModalActive] = useState(false);\n  const [connectedWallet, setConnectedWallet] = useState(props.options.useLocalStorage ? LocalStorage.getWallet() : undefined);\n  const [invokeScript, setInvokeScript] = useState();\n  const [transactions, setTransactions] = useState(props.options.useLocalStorage ? LocalStorage.initStorage(network) : []);\n\n  const openWalletModal = () => setWalletModalActive(true);\n\n  const closeWalletModal = () => setWalletModalActive(false);\n\n  const connectWallet = async walletType => {\n    try {\n      const res = await new WalletAPI(walletType).init(network);\n      setConnectedWallet(res);\n\n      if (props.options.useLocalStorage) {\n        LocalStorage.setWallet(res);\n      }\n\n      setWalletModalActive(false);\n    } catch (e) {\n      toast.error(e.message);\n    }\n  };\n\n  const disConnectWallet = () => {\n    LocalStorage.removeWallet();\n    setConnectedWallet(undefined);\n  };\n\n  const doInvoke = invokeScript => {\n    if (isWalletModalActive) setWalletModalActive(false);\n    setInvokeScript(invokeScript);\n  };\n\n  const closeInvoke = () => setInvokeScript(undefined);\n\n  const contextValue = {\n    useDevWallet: props.options.useDevWallet,\n    network,\n    invokeScript,\n    list: WalletAPI.list,\n    connectedWallet,\n    isWalletModalActive,\n    openWalletModal,\n    closeWalletModal,\n    connectWallet,\n    disConnectWallet,\n    doInvoke,\n    closeInvoke,\n    transactions\n  };\n  return /*#__PURE__*/_jsxDEV(WalletContext.Provider, {\n    value: contextValue,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n\n_s(WalletContextProvider, \"5Go6YetaulQpcturWLfIdb2w9oQ=\");\n\n_c = WalletContextProvider;\nexport const useWallet = () => {\n  _s2();\n\n  return useContext(WalletContext);\n};\n\n_s2(useWallet, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"WalletContextProvider\");","map":{"version":3,"sources":["/Users/ed/Projects/n3-ftw/client/src/packages/provider/wallet-provider.tsx"],"names":["React","createContext","useContext","useState","LocalStorage","WalletAPI","toast","WalletContext","WalletContextProvider","props","network","options","isWalletModalActive","setWalletModalActive","connectedWallet","setConnectedWallet","useLocalStorage","getWallet","undefined","invokeScript","setInvokeScript","transactions","setTransactions","initStorage","openWalletModal","closeWalletModal","connectWallet","walletType","res","init","setWallet","e","error","message","disConnectWallet","removeWallet","doInvoke","closeInvoke","contextValue","useDevWallet","list","children","useWallet"],"mappings":"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","sourcesContent":["import { ContextOptions, IWalletStates } from \"./interfaces\";\nimport React, { createContext, useContext, useState } from \"react\";\nimport { IConnectedWallet, IWalletType } from \"../neo/wallet/interfaces\";\nimport { LocalStorage } from \"../neo/local-storage\";\nimport { sc } from \"@cityofzion/neon-core\";\nimport { WalletAPI } from \"../neo/wallet\";\nimport toast from \"react-hot-toast\";\n\nexport const WalletContext = createContext({} as IWalletStates);\nexport const WalletContextProvider = (props: {\n  options: ContextOptions;\n  children: any;\n}) => {\n  const [network] = useState(props.options.network);\n\n  const [isWalletModalActive, setWalletModalActive] = useState(false);\n\n  const [connectedWallet, setConnectedWallet] = useState<\n    IConnectedWallet | undefined\n  >(props.options.useLocalStorage ? LocalStorage.getWallet() : undefined);\n\n  const [invokeScript, setInvokeScript] = useState<\n    sc.ContractCallJson | undefined\n  >();\n\n  const [transactions, setTransactions] = useState(\n    props.options.useLocalStorage ? LocalStorage.initStorage(network) : []\n  );\n\n  const openWalletModal = () => setWalletModalActive(true);\n\n  const closeWalletModal = () => setWalletModalActive(false);\n\n  const connectWallet = async (walletType: IWalletType) => {\n    try {\n      const res = await new WalletAPI(walletType).init(network);\n      setConnectedWallet(res);\n      if (props.options.useLocalStorage) {\n        LocalStorage.setWallet(res);\n      }\n      setWalletModalActive(false);\n    } catch (e: any) {\n      toast.error(e.message);\n    }\n  };\n\n  const disConnectWallet = () => {\n    LocalStorage.removeWallet();\n    setConnectedWallet(undefined);\n  };\n\n  const doInvoke = (invokeScript: sc.ContractCallJson) => {\n    if (isWalletModalActive) setWalletModalActive(false);\n    setInvokeScript(invokeScript);\n  };\n\n  const closeInvoke = () => setInvokeScript(undefined);\n\n  const contextValue: IWalletStates = {\n    useDevWallet: props.options.useDevWallet,\n    network,\n    invokeScript,\n    list: WalletAPI.list,\n    connectedWallet,\n    isWalletModalActive,\n    openWalletModal,\n    closeWalletModal,\n    connectWallet,\n    disConnectWallet,\n    doInvoke,\n    closeInvoke,\n    transactions,\n  };\n\n  return (\n    <WalletContext.Provider value={contextValue}>\n      {props.children}\n    </WalletContext.Provider>\n  );\n};\nexport const useWallet = () => useContext(WalletContext);\n"]},"metadata":{},"sourceType":"module"}