{"ast":null,"code":"var _jsxFileName = \"/Users/ed/Projects/n3-ftw/client/src/packages/provider/wallet-provider.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { createContext, useContext, useState } from \"react\";\nimport { LocalStorage } from \"../neo/local-storage\";\nimport { WalletAPI } from \"../neo/wallet\";\nimport toast from \"react-hot-toast\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const WalletContext = /*#__PURE__*/createContext({});\nexport const WalletContextProvider = props => {\n  _s();\n\n  const [network] = useState(props.options.network);\n  const [isWalletModalActive, setWalletModalActive] = useState(false);\n  const [connectedWallet, setConnectedWallet] = useState(props.options.useLocalStorage ? LocalStorage.getWallet() : undefined);\n  const [invokeScript, setInvokeScript] = useState(); // const [transactions, setTransactions] = useState(\n  //   props.options.useLocalStorage ? LocalStorage.initStorage(network) : []\n  // );\n\n  const [pendingTransactions, setPendingTransactions] = useState([]);\n\n  const openWalletModal = () => setWalletModalActive(true);\n\n  const closeWalletModal = () => setWalletModalActive(false);\n\n  const connectWallet = async walletType => {\n    try {\n      const res = await new WalletAPI(walletType).init(network);\n      setConnectedWallet(res);\n\n      if (props.options.useLocalStorage) {\n        LocalStorage.setWallet(res);\n      }\n\n      setWalletModalActive(false);\n    } catch (e) {\n      toast.error(e.message);\n    }\n  };\n\n  const disConnectWallet = () => {\n    LocalStorage.removeWallet();\n    setConnectedWallet(undefined);\n  };\n\n  const doInvoke = args => {\n    if (isWalletModalActive) setWalletModalActive(false);\n    setInvokeScript(args);\n  };\n\n  const closeInvoke = () => setInvokeScript(undefined);\n\n  const addPendingTransaction = txid => {\n    setPendingTransactions([...pendingTransactions, txid]);\n  };\n\n  const contextValue = {\n    useDevWallet: props.options.useDevWallet,\n    network,\n    invokeScript,\n    list: WalletAPI.list,\n    connectedWallet,\n    isWalletModalActive,\n    openWalletModal,\n    closeWalletModal,\n    connectWallet,\n    disConnectWallet,\n    doInvoke,\n    closeInvoke,\n    addPendingTransaction,\n    removePending,\n    pendingTransactions\n  };\n  return /*#__PURE__*/_jsxDEV(WalletContext.Provider, {\n    value: contextValue,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n};\n\n_s(WalletContextProvider, \"3w0B9wTTWClsqSDDSEfPXfRV+vY=\");\n\n_c = WalletContextProvider;\nexport const useWallet = () => {\n  _s2();\n\n  return useContext(WalletContext);\n};\n\n_s2(useWallet, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"WalletContextProvider\");","map":{"version":3,"sources":["/Users/ed/Projects/n3-ftw/client/src/packages/provider/wallet-provider.tsx"],"names":["React","createContext","useContext","useState","LocalStorage","WalletAPI","toast","WalletContext","WalletContextProvider","props","network","options","isWalletModalActive","setWalletModalActive","connectedWallet","setConnectedWallet","useLocalStorage","getWallet","undefined","invokeScript","setInvokeScript","pendingTransactions","setPendingTransactions","openWalletModal","closeWalletModal","connectWallet","walletType","res","init","setWallet","e","error","message","disConnectWallet","removeWallet","doInvoke","args","closeInvoke","addPendingTransaction","txid","contextValue","useDevWallet","list","removePending","children","useWallet"],"mappings":"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","sourcesContent":["import { ContextOptions, IWalletStates } from \"./interfaces\";\nimport React, { createContext, useContext, useState } from \"react\";\nimport { IConnectedWallet, IWalletType } from \"../neo/wallet/interfaces\";\nimport { LocalStorage } from \"../neo/local-storage\";\nimport { sc } from \"@cityofzion/neon-core\";\nimport { WalletAPI } from \"../neo/wallet\";\nimport toast from \"react-hot-toast\";\n\nexport const WalletContext = createContext({} as IWalletStates);\nexport const WalletContextProvider = (props: {\n  options: ContextOptions;\n  children: any;\n}) => {\n  const [network] = useState(props.options.network);\n\n  const [isWalletModalActive, setWalletModalActive] = useState(false);\n\n  const [connectedWallet, setConnectedWallet] = useState<\n    IConnectedWallet | undefined\n  >(props.options.useLocalStorage ? LocalStorage.getWallet() : undefined);\n\n  const [invokeScript, setInvokeScript] = useState<\n    sc.ContractCallJson | undefined\n  >();\n\n  // const [transactions, setTransactions] = useState(\n  //   props.options.useLocalStorage ? LocalStorage.initStorage(network) : []\n  // );\n\n  const [pendingTransactions, setPendingTransactions] = useState<string[]>([]);\n\n  const openWalletModal = () => setWalletModalActive(true);\n\n  const closeWalletModal = () => setWalletModalActive(false);\n\n  const connectWallet = async (walletType: IWalletType) => {\n    try {\n      const res = await new WalletAPI(walletType).init(network);\n      setConnectedWallet(res);\n      if (props.options.useLocalStorage) {\n        LocalStorage.setWallet(res);\n      }\n      setWalletModalActive(false);\n    } catch (e: any) {\n      toast.error(e.message);\n    }\n  };\n\n  const disConnectWallet = () => {\n    LocalStorage.removeWallet();\n    setConnectedWallet(undefined);\n  };\n\n  const doInvoke = (args: sc.ContractCallJson) => {\n    if (isWalletModalActive) setWalletModalActive(false);\n    setInvokeScript(args);\n  };\n\n  const closeInvoke = () => setInvokeScript(undefined);\n\n  const addPendingTransaction = (txid: string) => {\n    setPendingTransactions([...pendingTransactions, txid]);\n  };\n\n  const contextValue: IWalletStates = {\n    useDevWallet: props.options.useDevWallet,\n    network,\n    invokeScript,\n    list: WalletAPI.list,\n    connectedWallet,\n    isWalletModalActive,\n    openWalletModal,\n    closeWalletModal,\n    connectWallet,\n    disConnectWallet,\n    doInvoke,\n    closeInvoke,\n    addPendingTransaction,\n    removePending,\n    pendingTransactions,\n  };\n\n  return (\n    <WalletContext.Provider value={contextValue}>\n      {props.children}\n    </WalletContext.Provider>\n  );\n};\nexport const useWallet = () => useContext(WalletContext);\n"]},"metadata":{},"sourceType":"module"}